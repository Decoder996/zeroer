# å¿«é€Ÿè½¬æ¢å’Œæµ‹è¯•æŒ‡å—

## âœ… å¯ä»¥ç›´æ¥è½¬æ¢ä½¿ç”¨çš„æ•°æ®é›†

ä»¥ä¸‹æ•°æ®é›†**å·²ç»æœ‰ blocking å‡½æ•°**ï¼Œå¯ä»¥ç›´æ¥è½¬æ¢å¹¶æµ‹è¯•ï¼š

### 1. DBLP-ACM
```bash
# è½¬æ¢
python convert_any_dataset.py datasets_raw/Structured/DBLP-ACM dblp_acm

# è¿è¡Œï¼ˆå·²æœ‰ block_dblp_acm å‡½æ•°ï¼‰
python zeroer.py dblp_acm
```

### 2. DBLP-GoogleScholar
```bash
# è½¬æ¢
python convert_any_dataset.py datasets_raw/Structured/DBLP-GoogleScholar dblp_googlescholar

# éœ€è¦æ·»åŠ æ˜ å°„ï¼ˆå·²æœ‰ block_dblp_scholar å‡½æ•°ï¼‰
# åœ¨ blocking_functions.py ä¸­æ·»åŠ ï¼š
# blocking_functions_mapping["dblp_googlescholar"] = block_dblp_scholar

# è¿è¡Œ
python zeroer.py dblp_googlescholar
```

### 3. Walmart-Amazon
```bash
# è½¬æ¢
python convert_any_dataset.py datasets_raw/Structured/Walmart-Amazon walmart_amazon

# è¿è¡Œï¼ˆå·²æœ‰ block_walmart_amazon å‡½æ•°ï¼‰
python zeroer.py walmart_amazon
```

### 4. Beer
```bash
# è½¬æ¢
python convert_any_dataset.py datasets_raw/Structured/Beer beer

# è¿è¡Œï¼ˆå·²æœ‰ block_beer å‡½æ•°ï¼‰
python zeroer.py beer
```

### 5. Amazon-GoogleProducts
```bash
# è½¬æ¢ï¼ˆå¦‚æœè¿˜æ²¡æœ‰è½¬æ¢ï¼‰
python convert_any_dataset.py datasets_raw/Structured/Amazon-GoogleProducts amazon_googleproducts

# è¿è¡Œï¼ˆå·²æœ‰ block_amazon_googleproducts å‡½æ•°ï¼‰
python zeroer.py amazon_googleproducts
```

## âš ï¸ éœ€è¦æ·»åŠ  blocking å‡½æ•°çš„æ•°æ®é›†

### 1. iTunes-Amazon
```bash
# è½¬æ¢
python convert_any_dataset.py datasets_raw/Structured/iTunes-Amazon itunes_amazon

# æŸ¥çœ‹æ•°æ®ï¼Œç¡®å®š blocking ç­–ç•¥
head datasets/itunes_amazon/tableA.csv
head datasets/itunes_amazon/tableB.csv

# åœ¨ blocking_functions.py ä¸­æ·»åŠ  blocking å‡½æ•°
# å¯ä»¥å‚è€ƒå…¶ä»–æ•°æ®é›†çš„ blocking å‡½æ•°

# æ·»åŠ æ˜ å°„
# blocking_functions_mapping["itunes_amazon"] = block_itunes_amazon

# è¿è¡Œ
python zeroer.py itunes_amazon
```

### 2. Amazon-Google
```bash
# è½¬æ¢
python convert_any_dataset.py datasets_raw/Structured/Amazon-Google amazon_google

# æŸ¥çœ‹æ•°æ®ï¼Œç¡®å®š blocking ç­–ç•¥
head datasets/amazon_google/tableA.csv
head datasets/amazon_google/tableB.csv

# åœ¨ blocking_functions.py ä¸­æ·»åŠ  blocking å‡½æ•°
# å¯ä»¥å‚è€ƒ amazon_googleproducts çš„ blocking å‡½æ•°

# æ·»åŠ æ˜ å°„
# blocking_functions_mapping["amazon_google"] = block_amazon_google

# è¿è¡Œ
python zeroer.py amazon_google
```

## ğŸ“Š æ‰¹é‡æµ‹è¯•è„šæœ¬

åˆ›å»ºä¸€ä¸ªæ‰¹é‡æµ‹è¯•è„šæœ¬ `test_all_datasets.sh`:

```bash
#!/bin/bash
# test_all_datasets.sh

echo "å¼€å§‹æ‰¹é‡è½¬æ¢å’Œæµ‹è¯•æ•°æ®é›†..."
echo "============================================================"

# å®šä¹‰æ•°æ®é›†åˆ—è¡¨ï¼ˆæ•°æ®é›†å:è½¬æ¢åçš„åç§°ï¼‰
datasets=(
    "DBLP-ACM:dblp_acm"
    "DBLP-GoogleScholar:dblp_googlescholar"
    "Walmart-Amazon:walmart_amazon"
    "Beer:beer"
)

for dataset in "${datasets[@]}"; do
    IFS=':' read -r source target <<< "$dataset"
    echo ""
    echo "============================================================"
    echo "å¤„ç†: $source -> $target"
    echo "============================================================"
    
    # è½¬æ¢æ•°æ®é›†
    python convert_any_dataset.py "datasets_raw/Structured/$source" "$target"
    
    # å¦‚æœæ˜¯ dblp_googlescholarï¼Œéœ€è¦æ·»åŠ æ˜ å°„
    if [ "$target" == "dblp_googlescholar" ]; then
        echo "æ³¨æ„: éœ€è¦åœ¨ blocking_functions.py ä¸­æ·»åŠ æ˜ å°„"
        echo "blocking_functions_mapping[\"dblp_googlescholar\"] = block_dblp_scholar"
    fi
    
    # è¿è¡Œ zeroERï¼ˆå¦‚æœå·²æœ‰ blocking å‡½æ•°ï¼‰
    echo "è¿è¡Œ zeroER..."
    python zeroer.py "$target" 2>&1 | tee "results_${target}.log"
    
    echo "å®Œæˆ: $target"
done

echo ""
echo "============================================================"
echo "æ‰€æœ‰æ•°æ®é›†å¤„ç†å®Œæˆï¼"
echo "============================================================"
```

## ğŸ” æ£€æŸ¥è½¬æ¢ç»“æœ

è½¬æ¢åï¼Œæ£€æŸ¥æ•°æ®é›†ï¼š

```bash
# æ£€æŸ¥æ–‡ä»¶
ls -lh datasets/<dataset_name>/

# æ£€æŸ¥æ•°æ®ç»Ÿè®¡
python3 << EOF
import pandas as pd
dataset = "<dataset_name>"
tableA = pd.read_csv(f"datasets/{dataset}/tableA.csv")
tableB = pd.read_csv(f"datasets/{dataset}/tableB.csv")
matches = pd.read_csv(f"datasets/{dataset}/matches.csv")
print(f"Table A: {len(tableA)} rows")
print(f"Table B: {len(tableB)} rows")
print(f"Matches: {len(matches)} pairs")
print(f"Match ratio: {len(matches) / (len(tableA) * len(tableB)) * 100:.4f}%")
EOF
```

## ğŸ“ˆ æŸ¥çœ‹ F1 ç»“æœ

è¿è¡Œ zeroER åï¼Œä¼šåœ¨ç»ˆç«¯è¾“å‡º F1ã€Precisionã€Recallã€‚

ä¹Ÿå¯ä»¥æŸ¥çœ‹ç”Ÿæˆçš„ `pred.csv` æ–‡ä»¶ï¼š

```bash
# æŸ¥çœ‹é¢„æµ‹ç»“æœ
head datasets/<dataset_name>/pred.csv

# ç»Ÿè®¡é¢„æµ‹ç»“æœ
python3 << EOF
import pandas as pd
pred = pd.read_csv("datasets/<dataset_name>/pred.csv")
print(f"é¢„æµ‹ä¸ºæ­£æ ·æœ¬: {sum(pred['pred'] == 1)}")
print(f"é¢„æµ‹ä¸ºè´Ÿæ ·æœ¬: {sum(pred['pred'] == 0)}")
EOF
```

## ğŸ’¡ æç¤º

1. **å°æ•°æ®é›†ä¼˜å…ˆ**: å»ºè®®å…ˆæµ‹è¯•è¾ƒå°çš„æ•°æ®é›†ï¼ˆå¦‚ DBLP-ACM, Beerï¼‰
2. **æ§åˆ¶ CPU**: ä½¿ç”¨ `--n_jobs 2` æˆ– `--n_jobs 4` æ§åˆ¶å¹¶è¡Œæ•°
3. **æ£€æŸ¥ blocking è´¨é‡**: å€™é€‰å¯¹æ•°é‡åº”è¯¥åœ¨åˆç†èŒƒå›´ï¼ˆé€šå¸¸æ˜¯è¡¨å¤§å°çš„ 1%-10%ï¼‰
4. **ç‰¹å¾èŒƒå›´**: ç¡®ä¿ç‰¹å¾åœ¨ [0,1] èŒƒå›´ï¼ˆä»£ç ä¼šè‡ªåŠ¨æ£€æŸ¥å’Œå½’ä¸€åŒ–ï¼‰

## ğŸ› å¸¸è§é—®é¢˜

### Q: è½¬æ¢åæ‰¾ä¸åˆ° blocking å‡½æ•°ï¼Ÿ
A: æ£€æŸ¥ `blocking_functions.py`ï¼Œå¦‚æœæ²¡æœ‰ï¼Œéœ€è¦æ·»åŠ ã€‚

### Q: Blocking äº§ç”Ÿå¤ªå¤šå€™é€‰å¯¹ï¼Ÿ
A: å¢åŠ  `overlap_size` å‚æ•°ï¼Œä½¿ç”¨æ›´ä¸¥æ ¼çš„ blockingã€‚

### Q: F1 åˆ†æ•°å¾ˆä½ï¼Ÿ
A: æ£€æŸ¥ï¼š
- ç‰¹å¾æ˜¯å¦åœ¨ [0,1] èŒƒå›´
- åˆå§‹åŒ–æ­£æ ·æœ¬æ¯”ä¾‹æ˜¯å¦åˆç†ï¼ˆåº”è¯¥åœ¨ 0.1%-10%ï¼‰
- Blocking è´¨é‡ï¼ˆæ­£æ ·æœ¬æ¯”ä¾‹åº”è¯¥åœ¨ 0.1%-10%ï¼‰

